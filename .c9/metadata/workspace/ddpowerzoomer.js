{"filter":false,"title":"ddpowerzoomer.js","tooltip":"/ddpowerzoomer.js","undoManager":{"mark":20,"position":20,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":127,"column":2},"action":"insert","lines":["/*Image Power Zoomer v1.1 (June 18th, 2010)","* This notice must stay intact for usage ","* Author: Dynamic Drive at http://www.dynamicdrive.com/","* Visit http://www.dynamicdrive.com/ for full source code","*/","","//June 18th, 10: Adds ability to specify a different, higher resolution version of the original image as the image shown inside the magnifying glass.","","jQuery.noConflict()","","var ddpowerzoomer={","\tdsetting: {defaultpower:2, powerrange:[2,7], magnifiersize:[75, 75]},","\tmousewheelevt: (/Firefox/i.test(navigator.userAgent))? \"DOMMouseScroll\" : \"mousewheel\", //FF doesn't recognize mousewheel as of FF3.x","\t$magnifier: {outer:null, inner:null, image:null},","\tactiveimage: null,","","\tmovemagnifier:function(e, moveBol, zoomdir){","\t\tvar activeimage=ddpowerzoomer.activeimage //get image mouse is currently over","\t\tvar activeimginfo=activeimage.info","\t\tvar coords=activeimginfo.coords //get offset coordinates of image relative to upper left corner of page","\t\tvar $magnifier=ddpowerzoomer.$magnifier","\t\tvar magdimensions=activeimginfo.magdimensions //get dimensions of magnifier","\t\tvar power=activeimginfo.power.current","\t\tvar powerrange=activeimginfo.power.range","\t\tvar x=e.pageX-coords.left //get x coords of mouse within image (where top corner of image is 0)","\t\tvar y=e.pageY-coords.top","\t\tif (moveBol==true){","\t\t\tif (e.pageX>=coords.left && e.pageX<=coords.right && e.pageY>=coords.top && e.pageY<=coords.bottom)  //if mouse is within currently within boundaries of active base image","\t\t\t\t$magnifier.outer.css({left:e.pageX-magdimensions[0]/2, top:e.pageY-magdimensions[1]/2})\t//move magnifier so it follows the cursor","\t\t\telse{ //if mouse is outside base image","\t\t\t\tddpowerzoomer.activeimage=null","\t\t\t\t$magnifier.outer.hide() //hide magnifier","\t\t\t}","\t\t}","\t\telse if (zoomdir){ //if zoom in","\t\t\tvar od=activeimginfo.dimensions //get dimensions of image","\t\t\tvar newpower=(zoomdir==\"in\")? Math.min(power+1, powerrange[1]) : Math.max(power-1, powerrange[0]) //get new power from zooming in or out","\t\t\tvar nd=[od[0]*newpower, od[1]*newpower] //calculate dimensions of new enlarged image within magnifier","\t\t\t$magnifier.image.css({width:nd[0], height:nd[1]})","\t\t\tactiveimginfo.power.current=newpower //set current power to new power after magnification","\t\t}","\t\tpower=activeimginfo.power.current //get current power","\t\tvar newx=-x*power+magdimensions[0]/2 //calculate x coord to move enlarged image","\t\tvar newy=-y*power+magdimensions[1]/2","\t\t$magnifier.inner.css({left:newx, top:newy}) //move image wrapper within magnifier so the correct image area is shown","\t},","","\tsetupimage:function($, imgref, options){","\t\tvar s=jQuery.extend({}, ddpowerzoomer.dsetting, options)","\t\tvar $imgref=$(imgref)","\t\timgref.info={ //create object to remember various info regarding image ","\t\t\tpower: {current:s.defaultpower, range:s.powerrange},","\t\t\tmagdimensions: s.magnifiersize,","\t\t\tdimensions: [$imgref.width(), $imgref.height()],","\t\t\tcoords: null","\t\t}","\t\t$imgref.unbind('mouseenter').mouseenter(function(e){ //mouseenter event over base image","\t\t\tvar $magnifier=ddpowerzoomer.$magnifier","\t\t\t$magnifier.outer.css({width:s.magnifiersize[0], height:s.magnifiersize[1]}) //set magnifier's size","\t\t\tvar offset=$imgref.offset() //get image offset from document","\t\t\tvar power=imgref.info.power.current","\t\t\t$magnifier.inner.html('<img src=\"'+options.largeimagesrc+'\"/>') //get base image's src and create new image inside magnifier based on it","\t\t\t$magnifier.image=$magnifier.outer.find('img:first')","\t\t\t\t.css({width:imgref.info.dimensions[0]*power, height:imgref.info.dimensions[1]*power}) //set size of enlarged image","\t\t\tvar coords={left:offset.left, top:offset.top, right:offset.left+imgref.info.dimensions[0], bottom:offset.top+imgref.info.dimensions[1]}","\t\t\timgref.info.coords=coords //remember left, right, and bottom right coordinates of image relative to doc","\t\t\t$magnifier.outer.show()","\t\t\tddpowerzoomer.activeimage=imgref","\t\t})","\t},","","\t","\tinit:function($){","\t\tvar $magnifier=$('<div style=\"position:absolute;width:100px;height:100px;display:none;overflow:hidden;border:1px solid black;\" />')","\t\t\t.append('<div style=\"position:relative;left:0;top:0;\" />')","\t\t\t.appendTo(document.body) //create magnifier container and add to doc","\t\tddpowerzoomer.$magnifier={outer:$magnifier, inner:$magnifier.find('div:eq(0)'), image:null} //reference and remember various parts of magnifier","\t\t$magnifier=ddpowerzoomer.$magnifier","\t\t$(document).unbind('mousemove.trackmagnifier').bind('mousemove.trackmagnifier', function(e){ //bind mousemove event to doc","\t\t\tif (ddpowerzoomer.activeimage){ //if mouse is currently over a magnifying image","\t\t\t\tddpowerzoomer.movemagnifier(e, true) //move magnifier","\t\t\t}","\t\t}) //end document.mousemove","","\t\t$magnifier.outer.bind(ddpowerzoomer.mousewheelevt, function(e){ //bind mousewheel event to magnifier","\t\t\tif (ddpowerzoomer.activeimage){","\t\t\t\tvar delta=e.detail? e.detail*(-120) : e.wheelDelta //delta returns +120 when wheel is scrolled up, -120 when scrolled down","\t\t\t\tif (delta<=-120){ //zoom out","\t\t\t\t\tddpowerzoomer.movemagnifier(e, false, \"out\")","\t\t\t\t}","\t\t\t\telse{ //zoom in","\t\t\t\t\tddpowerzoomer.movemagnifier(e, false, \"in\")","\t\t\t\t}","\t\t\t\te.preventDefault()","\t\t\t}","\t\t})","\t}","} //ddpowerzoomer","","jQuery.fn.addpowerzoom=function(options){","\tvar $=jQuery","\treturn this.each(function(){ //return jQuery obj","\t\tif (this.tagName!=\"IMG\")","\t\t\treturn true //skip to next matched element","\t\tif (typeof options==\"undefined\")","\t\t\toptions={}","\t\tif (options.largeimage && options.largeimage.length>0){ //preload large image?","\t\t\toptions.preloadimg=new Image()","\t\t\toptions.preloadimg.src=options.largeimage","\t\t}","\t\tvar $imgref=$(this)","\t\toptions.largeimagesrc=(options.preloadimg)? options.preloadimg.src : $imgref.attr('src')","\t\tif (parseInt(this.style.width)>0 && parseInt(this.style.height)>0) //if image has explicit CSS width/height defined","\t\t\tddpowerzoomer.setupimage($, this, options)","\t\telse if (this.complete){ //account for IE not firing image.onload","\t\t\tddpowerzoomer.setupimage($, this, options)","\t\t}","\t\telse{","\t\t\t$imgref.bind('load', function(){","\t\t\t\tddpowerzoomer.setupimage($, this, options)","\t\t\t})","\t\t}","\t})","}","","jQuery(document).ready(function($){ //initialize power zoomer on DOM load","\tddpowerzoomer.init($)","})"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":25},"end":{"row":11,"column":26},"action":"remove","lines":["2"]},{"start":{"row":11,"column":25},"end":{"row":11,"column":26},"action":"insert","lines":["4"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":61},"end":{"row":11,"column":63},"action":"remove","lines":["75"]},{"start":{"row":11,"column":61},"end":{"row":11,"column":62},"action":"insert","lines":["1"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":62},"end":{"row":11,"column":63},"action":"insert","lines":["5"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":63},"end":{"row":11,"column":64},"action":"insert","lines":["0"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":66},"end":{"row":11,"column":68},"action":"remove","lines":["75"]},{"start":{"row":11,"column":66},"end":{"row":11,"column":67},"action":"insert","lines":["1"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":67},"end":{"row":11,"column":68},"action":"insert","lines":["5"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":68},"end":{"row":11,"column":69},"action":"insert","lines":["0"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":67},"end":{"row":11,"column":68},"action":"remove","lines":["5"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":67},"end":{"row":11,"column":68},"action":"remove","lines":["0"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":67},"end":{"row":11,"column":68},"action":"insert","lines":["7"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":68},"end":{"row":11,"column":69},"action":"insert","lines":["5"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":63},"end":{"row":11,"column":64},"action":"remove","lines":["0"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":62},"end":{"row":11,"column":63},"action":"remove","lines":["5"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":62},"end":{"row":11,"column":63},"action":"insert","lines":["7"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":63},"end":{"row":11,"column":64},"action":"insert","lines":["4"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":63},"end":{"row":11,"column":64},"action":"remove","lines":["4"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":63},"end":{"row":11,"column":64},"action":"insert","lines":["5"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":25},"end":{"row":11,"column":26},"action":"remove","lines":["4"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":25},"end":{"row":11,"column":26},"action":"insert","lines":["3"]}]}],[{"group":"doc","deltas":[{"start":{"row":11,"column":25},"end":{"row":11,"column":26},"action":"remove","lines":["3"]},{"start":{"row":11,"column":25},"end":{"row":11,"column":26},"action":"insert","lines":["2"]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":7.5,"selection":{"start":{"row":0,"column":0},"end":{"row":127,"column":2},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1428387147256,"hash":"fbcd45f3c2c80a7eaebb04d4ad8f0b6e754af32c"}